# DMN Lambda

## DMN 

## KYC




## Test


### Lambda URL


To retrieve URL Lambda.

    export AWS_STACK_NAME=dmn-lambda

    aws apigatewayv2 get-apis --output json --query "Items[?Tags.\"aws:cloudformation:stack-name\"=='${AWS_STACK_NAME}'].ApiEndpoint | [0] "  | jq -r

You should get this kind of output.

```
https://AAABBBDDDCCCC.execute-api.AWS_REGION.amazonaws.com
```

Execute this command once to export URL to bash env

    export URL=`aws apigatewayv2 get-apis --output json --query "Items[?Tags.\"aws:cloudformation:stack-name\"=='dmn-lambda'].ApiEndpoint | [0] "  | jq -r`

### CURL Execution

Execute a curl command

    curl ${URL}/KYC -X POST  -H 'Accept: application/json'  -H 'Content-Type: application/json'   --data-raw '{"PEP":true,"Amount":100000,"Fiscal Residency":"FR"}' | jq

```
{
    "Amount Rule": "HIGH",
    "Level to Int": "function Level to Int( Level )",
    "Max Level": "function Max Level( list of Level )",
    "KYC": {
        "Score": "HIGH",
        "Level": 150
    },
    "Fiscal Residency Rule": "LOW",
    "Amount": 100000,
    "Int to Level": "function Int to Level( Int )",
    "PEP Rule": "HIGH",
    "PEP": true,
    "Fiscal Residency": "FR",
    "Level to Score": "function Level to Score( Level )"
}

```